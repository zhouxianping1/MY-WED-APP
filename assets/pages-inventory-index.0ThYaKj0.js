import{$ as a,g as t,n as e,b as s,a as l,r as i,e as o,w as n,i as r,o as c,j as d,f as u,q as m,u as g,F as f,v as h,l as _,I as p,x as v,t as k}from"./index-D1azYyZI.js";import{C as w}from"./CustomNavBar.CZ4sq6xv.js";import{_ as x}from"./_plugin-vue_export-helper.BCo6x5W8.js";const y=x({name:"InventoryPage",components:{CustomNavBar:w},data:()=>({searchKeyword:"",materials:[],loading:!1,navBarHeight:64}),computed:{filteredMaterials(){if(!this.searchKeyword)return this.materials;const a=this.searchKeyword.toLowerCase();return this.materials.filter((t=>t.name.toLowerCase().includes(a)||t.code.toLowerCase().includes(a)||t.location.toLowerCase().includes(a)))}},onLoad(){this.fetchMaterials(),this.getNavBarHeight()},methods:{getNavBarHeight(){a("updateNavBarHeight",(a=>{this.navBarHeight=a}));try{const a=t("navBarHeight");a&&(this.navBarHeight=a)}catch(e){}},async fetchMaterials(){var a;this.loading=!0;try{const t=await e.callFunction({name:"material",data:{action:"getMaterials",data:{page:1,pageSize:50}}});t.result&&0===t.result.code?this.materials=t.result.data.materials||[]:s({title:(null==(a=t.result)?void 0:a.msg)||"Ëé∑ÂèñÊï∞ÊçÆÂ§±Ë¥•",icon:"none"})}catch(t){console.error("Ëé∑ÂèñÂéüÊñôÂàóË°®Â§±Ë¥•",t),s({title:"Ëé∑ÂèñÂéüÊñôÂàóË°®Â§±Ë¥•",icon:"none"})}finally{this.loading=!1}},formatStock:a=>null==a?"0":a<.001?`${(1e6*a).toFixed(0)}g`:a<1?`${(1e3*a).toFixed(0)}kg`:`${a.toFixed(1)}t`,handleSearch(){},viewMaterialDetail(a){l({url:`/pages/material/detail?id=${a}`})},addNewMaterial(){l({url:"/pages/material-add/index"})},navigateTo(a){l({url:a})}}},[["render",function(a,t,e,s,l,w){const x=i("custom-nav-bar"),y=_,C=p,b=r;return c(),o(b,{class:"inventory-container"},{default:n((()=>[d(x,{title:"Â∫ìÂ≠òÁÆ°ÁêÜ"}),d(b,{class:"page-content",style:h({paddingTop:l.navBarHeight+20+"px"})},{default:n((()=>[d(b,{class:"search-box"},{default:n((()=>[d(y,{class:"search-icon"},{default:n((()=>[u("üîç")])),_:1}),d(C,{class:"search-input",placeholder:"ÊêúÁ¥¢ÂéüÊñô... / T√¨m nguy√™n li·ªáu...",modelValue:l.searchKeyword,"onUpdate:modelValue":t[0]||(t[0]=a=>l.searchKeyword=a),onInput:w.handleSearch},null,8,["modelValue","onInput"])])),_:1}),d(b,{class:"materials-list"},{default:n((()=>[(c(!0),m(f,null,g(w.filteredMaterials,((a,t)=>(c(),o(b,{class:"material-item",key:t,onClick:t=>w.viewMaterialDetail(a._id)},{default:n((()=>[d(b,{class:v(["material-icon",{warning:a.stock<=a.min_stock_warning,danger:a.stock<=0}])},{default:n((()=>[d(y,{class:"icon-text"},{default:n((()=>[u("üì¶")])),_:1})])),_:2},1032,["class"]),d(b,{class:"material-info"},{default:n((()=>[d(y,{class:"material-name"},{default:n((()=>[u(k(a.name),1)])),_:2},1024),d(y,{class:"material-code"},{default:n((()=>[u("ÁºñÂè∑: "+k(a.code)+" | ‰ΩçÁΩÆ: "+k(a.location),1)])),_:2},1024)])),_:2},1024),d(y,{class:v(["material-stock",{"warning-text":a.stock<=a.min_stock_warning,"danger-text":a.stock<=0}])},{default:n((()=>[u(k(w.formatStock(a.stock)),1)])),_:2},1032,["class"])])),_:2},1032,["onClick"])))),128))])),_:1}),d(b,{class:"bottom-buttons"},{default:n((()=>[d(b,{class:"button-item blue",onClick:t[1]||(t[1]=a=>w.navigateTo("/pages/stock/in"))},{default:n((()=>[d(y,{class:"button-text"},{default:n((()=>[u("ÂÖ•Â∫ìÊìç‰Ωú")])),_:1})])),_:1}),d(b,{class:"button-item gray",onClick:t[2]||(t[2]=a=>w.navigateTo("/pages/stock/out"))},{default:n((()=>[d(y,{class:"button-text"},{default:n((()=>[u("Âá∫Â∫ìÊìç‰Ωú")])),_:1})])),_:1}),d(b,{class:"button-item red",onClick:t[3]||(t[3]=a=>w.navigateTo("/pages/stock/delete"))},{default:n((()=>[d(y,{class:"button-text"},{default:n((()=>[u("Âà†Èô§ÂéüÊñô")])),_:1})])),_:1})])),_:1}),d(b,{class:"add-button",onClick:w.addNewMaterial},{default:n((()=>[d(y,{class:"add-icon"},{default:n((()=>[u("+")])),_:1})])),_:1},8,["onClick"])])),_:1},8,["style"])])),_:1})}],["__scopeId","data-v-e9904e74"]]);export{y as default};
